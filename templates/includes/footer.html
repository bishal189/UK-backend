 {% load static %}

  <div id="shopify-section-newsletter" class="shopify-section shopify-section__newsletter">
         </div>
         <div id="shopify-section-footer" class="shopify-section shopify-section__footer">
            <footer class="footer" role="contentinfo">
               <div class="inner">
                  <div class="footer__wrapper">
                     <section class="footer__module footer__links">
                        <ul class="footer__linklist">
                           <li class="footer__linklist-item">
                              <a href={% url 'faqs' %} class="footer__linklist-link">Faqs</a>
                           </li>
                           <li class="footer__linklist-item">
                              <a href={% url 'delivery_and_returns' %} class="footer__linklist-link">Delivery & returns</a>
                           </li>
                           <li class="footer__linklist-item">
                              <a href="{% url 'terms_and_conditions' %}" class="footer__linklist-link">Terms</a>
                           </li>
                           <li class="footer__linklist-item">
                              <a href="{% url 'privacy_policy' %}" class="footer__linklist-link">Privacy</a>
                           </li>
                           <li class="footer__linklist-item">
                              <a href="{% url 'customer_reviews' %}" class="footer__linklist-link">Reviews</a>
                           </li>
                           <li class="footer__linklist-item">
                              <a href="{% url 'about_us' %}" class="footer__linklist-link">About us</a>
                           </li>
                           <li class="footer__linklist-item">
                              <a href="{% url 'contact_us' %}" class="footer__linklist-link">Contact us</a>
                           </li>
                        </ul>
                     </section>
                     <section class="footer__module footer__newsletter">
                        <h3 class="footer__title">SIGN UP AND GET 10% OFF YOUR FIRST ORDER</h3>
                        <div class="klaviyo-form-KhHKxu footer__newsletter-form"></div>
                        <p class="footer__gdpr-notice"><em>By signing up, you agree to receive our newsletters, promotions and
                           other commercial messages in accordance with our <a href="pages/privacy-policy.html">privacy
                           policy</a>. You may unsubscribe at any time.</em>
                        </p>
                     </section>
                  </div>
               </div>
               <div class="footer__misc">
                  <div class="inner">
                     <p class="footer__copyright">
                        © <a href="index.html">Lotus Art Studio</a> - Handmade Greeting Cards For All Reasons and All Seasons
                     </p>
                     <section class="footer__payment-methods">
                        <ul class="social-media social-media--inline">
                           <li class="social-media__item">
                              <a href="https://www.facebook.com/lotusartstudio/" target="_blank">
                                 <svg class="icon icon-facebook">
                                    <use xlink:href="#icon-facebook">
                                       <title>Facebook</title>
                                    </use>
                                 </svg>
                              </a>
                           </li>
                           <li class="social-media__item">
                              <a href="https://www.instagram.com/lotusartstudio/" target="_blank">
                                 <svg class="icon icon-instagram">
                                    <use xlink:href="#icon-instagram">
                                       <title>Instagram</title>
                                    </use>
                                 </svg>
                              </a>
                           </li>
                        </ul>
                     </section>
                  </div>
               </div>
            </footer>
            <a href="#" class="back-to-top" title="Back to the top">
               <svg class="icon icon-back-to-top-arrow">
                  <use xlink:href="#icon-back-to-top-arrow">
                  </use>
               </svg>
            </a>
         </div>
      </div>
      <div class="quick-shop modal modal--large remodal">
         <div class="quick-shop__spinner spinner-container spinner-container--large">
            <div class="spinner spinner--circle"></div>
         </div>
      </div>
      <script src="http://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js" type="text/javascript"></script>
      <script src="{% static 'cdn/shop/t/64/assets/modernizr.minc92c.js' %}"
         type="text/javascript"></script>
      <script src="{% static 'cdn/s/javascripts/currencies.js' %}" type="text/javascript"></script>
      <script
         src="http://cdn.polyfill.io/v2/polyfill.min.js"
         type="text/javascript"></script>
      <script src="{% static 'cdn/shop/t/64/assets/libs7737.js' %}" type="text/javascript"></script>
      <script src="{% static 'cdn/shop/t/64/assets/scriptcf7b.js' %}" type="text/javascript"></script>
      <!-- Hide Special Delivery info -->
      <!-- Hide RM24 Delivery info -->
      <style>
      </style>
      <!-- Hide International Delivery info -->
      <style>
         .international_delivery_available {
         display: none;
         }
      </style>

      <script>
document.addEventListener('DOMContentLoaded', function() {
    // Retrieve selected currency from local storage or default to GBP
    var selectedCurrency = localStorage.getItem('selectedCurrency') || 'GBP';
    // Set the selected currency in the dropdown
    document.querySelector('.currency-selector__select').value = selectedCurrency;
    // Update prices with the selected currency


   var priceElem = document.querySelectorAll('.product-item__price')
   if (priceElem.length==0)
      return;

      var priceTextOriginal = priceElem[0].textContent; // Get the price text


      localStorage.setItem('originalPrice',priceTextOriginal)


    updatePrices(selectedCurrency);

    document.querySelector('.currency-selector__select').addEventListener('change', function() {

      if (this.value=="GBP"){
                      var prices = document.querySelectorAll('.product-item__price');
                prices.forEach(function(priceElement) {

      priceElement.textContent = localStorage.getItem('originalPrice'); // Update the price text with symbol

      })
      return
      }
        var selectedCurrency = this.value;
        // Store the selected currency in local storage
        // Update prices with the selected currency
        updatePrices(selectedCurrency);
    });

    function updatePrices(currency) {
        // Fetch conversion rates from the API
         prevCurrency=localStorage.getItem('selectedCurrency')||"GBP";

        fetch('https://api.exchangerate-api.com/v4/latest/' + prevCurrency)
            .then(response => response.json())
            .then(data => {
                var conversionRates = data.rates;
                // Get all elements with the class 'product-item__price'
                var prices = document.querySelectorAll('.product-item__price');
                // Iterate over each price element
                prices.forEach(function(priceElement) {
                    var priceText = priceElement.textContent; // Get the price text
                    var priceValue = parseFloat(priceText.replace(/[^\d.]/g, '')); // Extract numeric part from the price
                    var convertedPrice = convertCurrency(priceValue, currency, conversionRates); // Convert the price to the selected currency
                    var symbol = getCurrencySymbol(currency); // Get the currency symbol
                    priceElement.textContent = symbol + convertedPrice.toFixed(2); // Update the price text with symbol
                });
                localStorage.setItem('selectedCurrency',currency)
            })
            .catch(error => {
                console.error('Error fetching conversion rates:', error);
            });
    }

    function convertCurrency(amount, currency, conversionRates) {
        // Get the conversion rate for the selected currency
        var rate = conversionRates[currency];
        console.log(rate)
        // Convert the amount to the selected currency
        var convertedAmount = amount * rate;
        return convertedAmount;
    }

    function getCurrencySymbol(currency) {
        // Define currency symbols
        var currencySymbols = {
            'GBP': '£',
            'EUR': '€',
            'USD': '$',
            'CAD': 'C$'
        };

        // Get the symbol for the selected currency
        return currencySymbols[currency];
    }
});
</script>
